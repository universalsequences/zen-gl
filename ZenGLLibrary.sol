
pragma solidity ^0.8.20;

contract ZenGLLibrary {
    string public data;

    constructor() {
        data = "!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.gl=t():e.gl=t()}(this,(()=>(()=>{\"use strict\";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},t={};e.r(t),e.d(t,{GLType:()=>n,abs:()=>D,add:()=>v,argument:()=>s,call:()=>i,ceil:()=>j,cos:()=>F,defun:()=>o,div:()=>V,dot:()=>k,emitArguments:()=>l,emitFunctions:()=>a,exp:()=>G,exp2:()=>_,float:()=>Z,floor:()=>x,func:()=>g,length:()=>z,max:()=>T,min:()=>M,mix:()=>C,mod:()=>E,mult:()=>$,pow:()=>h,sign:()=>P,sin:()=>w,smoothstep:()=>S,sqrt:()=>L,step:()=>O,sub:()=>y,tan:()=>A,uniform:()=>Y,unpack:()=>B,uv:()=>I,vec:()=>J,vec2:()=>K,vec3:()=>N,vec4:()=>Q,vector:()=>H,x:()=>W,y:()=>X,zen:()=>q});const r=e=>{let t,r;return n=>{if(void 0!==t){if(r===n)return n.isVariableEmitted(t.variable)?Object.assign(Object.assign({},t),{code:t.variable}):t;{if(n.isVariableEmitted(t.variable))return Object.assign(Object.assign({},t),{code:t.variable});let e=!1;if(t.variables)for(let r of t.variables)if(n.isVariableEmitted(r)){e=!0;break}if(!e){if(t.variables)for(let e of t.variables)n.emittedVariables[e]=!0;return n.emittedVariables[t.variable]=!0,t}}}return r=n,t=e(n),t}};var n;!function(e){e[e.Float=0]=\"Float\",e[e.Vec2=1]=\"Vec2\",e[e.Vec3=2]=\"Vec3\",e[e.Vec4=3]=\"Vec4\",e[e.Sampler2D=4]=\"Sampler2D\",e[e.Function=5]=\"Function\"}(n||(n={}));const o=(e,t)=>{let r;return n=>{if(r)return r;let o=new f(n).gen(e),i=\"\",s={};s=Object.assign({},e);let u=o.code;return u.includes(\";\")||(u+=\";\"),i+=`\\n${u}\\n\\nreturn ${o.variable};\\n            `,r=Object.assign(Object.assign({},s),{type:o.type,variables:[],code:i,uniforms:o.uniforms,variable:t,functions:a(o),functionArguments:l(o)}),r}},i=(e,...t)=>r((r=>{let n=t.map((e=>r.gen(e)));if(\"function\"!=typeof e)return n[0];let o=e(r),i=o.variable,[a]=r.useVariables(`${i}Value`),l=`${r.printType(o.type)} ${a} = ${i}(${n.map((e=>e.variable)).join(\",\")}); \\n`,s=r.emit(o.type,l,a,...n),u=void 0===s.functions?[]:s.functions;return s.functions=[...u,o],s.uniforms=[...s.uniforms||[],...o.uniforms||[]],s})),a=(...e)=>{let t=new Set;for(let r of e)if(r.functions)for(let e of r.functions)t.add(e);return Array.from(t)},l=(...e)=>{let t=new Set;for(let r of e)if(r.functionArguments)for(let e of r.functionArguments)t.add(e);return Array.from(t)},s=(e,t,n)=>r((r=>{let[o]=r.useVariables(\"funcArg\"),i=`${r.printType(n)} ${o} = ${e}; `,a=r.emit(n,i,o),l=[...a.functionArguments||[],{name:e,num:t,type:n}];return l=Array.from(new Set(l)),a.functionArguments=l,a}));class u{constructor(){this.idx=0,this.emittedVariables={},this.uniforms=[],this.errors=[],this.webGLRenderingContext=null,this.webGLProgram=null}initializeUniforms(){for(let e of this.uniforms)e.set()}isVariableEmitted(e){return!0===this.emittedVariables[e]}useVariables(...e){let t=this.idx++;return e.map((e=>`${e}${t}`))}gen(e){return void 0===e&&(e=0),\"number\"==typeof e?m(e)(this):e(this)}printType(e){return e===n.Float?\"float\":e===n.Vec2?\"vec2\":e===n.Vec3?\"vec3\":e===n.Vec4?\"vec4\":\"sampler2D\"}emitError(e){this.errors.push(e)}emit(e,t,r,...n){let o=new Set([r]);for(let{variables:e}of n)e&&e.forEach((e=>o.add(e)));let i=new Set([]);for(let{uniforms:e}of n)void 0!==e&&e.forEach((e=>i.add(e)));return{code:c(this,t,r,...n),uniforms:Array.from(i),variable:r,type:e,variables:Array.from(o),functions:a(...n),functionArguments:l(...n)}}}class f extends u{constructor(e){super(),this.parentContext=e}}const m=e=>{let t=e.toString();return e-Math.floor(e)==0&&(t+=\".0\"),()=>({code:t,variable:t,variables:[],type:n.Float})},c=(e,t,r,...n)=>{let o=\"\";e.emittedVariables[r]=!0;for(let t of n)p(t)&&(o+=t.code,e.emittedVariables[t.variable]=!0);return o+\"\\n\"+t},p=e=>e.code!==e.variable,b=e=>e===n.Float?\"float\":e===n.Vec2?\"vec2\":e===n.Vec3?\"vec3\":e===n.Vec4?\"vec4\":\"sampler2D\",d=(e,t)=>(...n)=>r((r=>{let o=n.map((e=>r.gen(e))),[i]=r.useVariables(t+\"Val\"),a=(e=>{let t=e.map((e=>e.type));return Math.max(...t)})(o),l=`${b(a)} ${i} = ${o.map((e=>e.variable)).join(e)};`;return r.emit(a,l,i,...o)})),g=(e,t=e,n,o)=>(...i)=>r((r=>{let a=i.map((e=>r.gen(e))),[l]=r.useVariables(`${t}Val`),s=void 0===o?a[0].type:o,u=b(s),f=i.length>0&&n&&i.every((e=>\"number\"==typeof e))?`${u} ${l} = ${n(...i)};`:`${u} ${l} = ${e}(${a.map((e=>e.variable)).join(\",\")});`;return r.emit(s,f,l,...a)})),v=d(\"+\",\"add\"),y=d(\"-\",\"sub\"),$=d(\"*\",\"mult\"),V=d(\"/\",\"div\"),h=g(\"pow\",\"pow\",Math.pow),x=g(\"floor\",\"floor\",Math.floor),j=g(\"ceil\",\"ceil\",Math.ceil),w=g(\"sin\",\"sin\",Math.sin),F=g(\"cos\",\"cos\",Math.cos),A=g(\"tan\",\"tan\",Math.tan),S=g(\"smoothstep\"),O=g(\"step\"),C=g(\"mix\"),M=g(\"min\"),T=g(\"max\"),E=g(\"mod\"),L=g(\"sqrt\"),P=g(\"sign\"),G=g(\"exp\"),_=g(\"exp2\"),z=g(\"length\",\"length\",void 0,n.Float),D=g(\"abs\",\"abs\"),k=g(\"dot\",\"dot\",void 0,n.Float),q=e=>{let t=new u,r=t.gen(e);console.log(\"generated\",r);let n=r.code;n+=`\\ngl_FragColor = ${r.variable}; `;let o=\"\";if(r.uniforms)for(let e of r.uniforms)o+=`\\nuniform ${t.printType(e.type)} ${e.name};\\n`;let i=\"\";if(r.functions)for(let e of r.functions)i+=R(t,e);let a=`\\nprecision mediump float;\\nuniform vec2 resolution;\\n${o}\\n\\n${i}\\n\\nvoid main() {\\n${n.split(\"\\n\").map((e=>\"    \"+e)).join(\"\\n\")}\\n}\\n`;return{code:a,context:t}},R=(e,t)=>{let r=`${e.printType(t.type)} ${t.variable}(`;return t.functionArguments&&(r+=t.functionArguments.sort(((e,t)=>e.num-t.num)).map((t=>`${e.printType(t.type)} ${t.name}`)).join(\",\")),r+=`) {\\n${t.code}\\n}\\n`,r},U=e=>()=>r((t=>{let[r]=t.useVariables(e+\"Val\"),o=n.Float,i=`${b(n.Float)} ${r} = gl_FragCoord.${e};`;return t.emit(o,i,r)})),B=e=>t=>r((r=>{let[o]=r.useVariables(e+\"Val\"),i=r.gen(t),a=n.Float,l=`${b(n.Float)} ${o} = ${i.variable}.${e};`;return r.emit(a,l,o,i)})),H=e=>{let t=e;return t.x=B(\"x\")(t),t.y=B(\"y\")(t),t.z=B(\"z\")(t),t.w=B(\"w\")(t),t},I=()=>H(r((e=>{let[t]=e.useVariables(\"uv\"),r=`${b(n.Vec2)} ${t} = (gl_FragCoord.xy-resolution)/resolution.y;\\n`;return e.emit(n.Vec2,r,t)}))),J=e=>(...t)=>H(r((r=>{let n=t.map((e=>r.gen(e))),[o]=r.useVariables(\"vectorVal\"),i=b(e),a=`${i} ${o} = ${i}(${n.map((e=>e.variable)).join(\",\")});`;return r.emit(e,a,o,...n)}))),K=J(n.Vec2),N=J(n.Vec3),Q=J(n.Vec4),W=U(\"x\"),X=U(\"y\"),Y=(e,t)=>{let n,o=[],i=t,a=()=>r((t=>{let r=t;for(;r.parentContext;)r=r.parentContext;o.push(r);let[i]=t.useVariables(\"uniform\");n={name:i,type:e};let l=t.emit(e,\"\",i);return l.uniforms||(l.uniforms=[]),l.uniforms.push(n),t.uniforms.push(a),t.parentContext&&t.parentContext.uniforms.push(a),l}));return a.set=(e=i)=>{if(i=e,n)for(let t of o){let r=t.webGLRenderingContext,o=t.webGLProgram;if(r&&o){let i=r.getUniformLocation(o,n.name);r.uniform1f(i,e),console.log(\"setting uni=%s -> %s in context\",n.name,e,t)}else console.log(\"no gl / program for uniform\",n.name)}},a},Z=m;return t})()));;window.gl = gl;";
    }

    function getData() public view returns  (string memory) {
        return data;
    }
}
